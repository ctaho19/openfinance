---
import DashboardLayout from '../../../layouts/DashboardLayout.astro';
import { getSession } from '../../../lib/get-session-astro';
import { BankAccountsManager } from '../../../components/settings/bank-accounts-manager';
import { ArrowLeft, Building2 } from 'lucide-react';

const session = await getSession(Astro.request);
if (!session?.user?.id) {
  return Astro.redirect('/login');
}
---
<DashboardLayout title="Bank Accounts" currentPath="/dashboard/settings" user={session.user} showExploreSidebar={false}>
  <div class="space-y-6 lg:space-y-8 animate-fade-in">
    <header class="flex items-center gap-4">
      <a 
        href="/dashboard/settings" 
        class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
      >
        <ArrowLeft className="h-5 w-5 text-gray-500" />
      </a>
      <div>
        <h1 class="text-2xl lg:text-3xl font-bold text-theme-primary tracking-tight flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
            <Building2 className="h-5 w-5 text-blue-600 dark:text-blue-400" />
          </div>
          Bank Accounts
        </h1>
        <p class="text-theme-secondary mt-1 ml-13">
          Manage your bank accounts to track bill payments by account
        </p>
      </div>
    </header>

    <section class="bg-theme-elevated border border-theme rounded-2xl p-6">
      <BankAccountsManager client:load />
    </section>

    <section class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-100 dark:border-blue-800 rounded-2xl p-6">
      <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-2">How it works</h3>
      <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
        <li class="flex items-start gap-2">
          <span class="text-blue-500 mt-0.5">•</span>
          Add bank accounts you use to pay bills
        </li>
        <li class="flex items-start gap-2">
          <span class="text-blue-500 mt-0.5">•</span>
          Assign a bank account when creating or editing bills
        </li>
        <li class="flex items-start gap-2">
          <span class="text-blue-500 mt-0.5">•</span>
          View pay period allocations grouped by bank account
        </li>
        <li class="flex items-start gap-2">
          <span class="text-blue-500 mt-0.5">•</span>
          See exactly how much to transfer to each account on payday
        </li>
      </ul>
    </section>
  </div>
</DashboardLayout>
