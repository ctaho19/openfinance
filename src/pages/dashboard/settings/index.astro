---
import DashboardLayout from '../../../layouts/DashboardLayout.astro';
import { getSession } from '../../../lib/get-session-astro';
import { AppearanceSettings } from '../../../components/ui/appearance-settings';
import { Building2, ChevronRight, Palette, Wallet } from 'lucide-react';

const session = await getSession(Astro.request);
if (!session?.user?.id) {
  return Astro.redirect('/login');
}
---
<DashboardLayout title="Settings" currentPath="/dashboard/settings" user={session.user} showExploreSidebar={false}>
  <div class="space-y-6 lg:space-y-8 animate-fade-in">
    <header>
      <h1 class="text-2xl lg:text-3xl font-bold text-theme-primary tracking-tight">Settings</h1>
      <p class="text-theme-secondary mt-1">
        Customize your experience
      </p>
    </header>

    <section class="bg-theme-elevated border border-theme rounded-2xl overflow-hidden">
      <a 
        href="/dashboard/settings/accounts" 
        class="flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors border-b border-theme"
      >
        <div class="flex items-center gap-4">
          <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-sm">
            <Building2 className="h-5 w-5 text-white" />
          </div>
          <div>
            <h3 class="font-semibold text-theme-primary">Bank Accounts</h3>
            <p class="text-sm text-theme-secondary">Manage accounts for bill payments</p>
          </div>
        </div>
        <ChevronRight className="h-5 w-5 text-gray-400" />
      </a>
      
      <a 
        href="/dashboard/settings/strategy" 
        class="flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors border-b border-theme"
      >
        <div class="flex items-center gap-4">
          <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-sm">
            <Wallet className="h-5 w-5 text-white" />
          </div>
          <div>
            <h3 class="font-semibold text-theme-primary">Paycheck Strategy</h3>
            <p class="text-sm text-theme-secondary">Configure your dollar allocation plan</p>
          </div>
        </div>
        <ChevronRight className="h-5 w-5 text-gray-400" />
      </a>
      
      <div class="p-5">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-11 h-11 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-sm">
            <Palette className="h-5 w-5 text-white" />
          </div>
          <div>
            <h3 class="font-semibold text-theme-primary">Appearance</h3>
            <p class="text-sm text-theme-secondary">Choose your theme preference</p>
          </div>
        </div>
        <AppearanceSettings client:load />
      </div>
    </section>
  </div>
</DashboardLayout>
