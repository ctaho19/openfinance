import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as y}from"./index.Cd_vQiNd.js";import{L as C}from"./link.D3EDiB7B.js";import{C as p,c as f,a as N,b as g}from"./card.CxXQM9B9.js";import{B as v}from"./button.9NTnJrUv.js";import{S as k,F as L}from"./search-input.CR8QaKi1.js";import{E as D}from"./ellipsis-vertical.BSXrCKoh.js";import{P as A,T as $}from"./trash-2.B9ETjWXL.js";import{c as u}from"./createLucideIcon.DV6VgPWa.js";import{C as I}from"./chevron-down.DUqbYN4x.js";import{C as P}from"./chevron-right.BPMsxEET.js";import{C as S}from"./check.D23q9GVG.js";import{R as b}from"./receipt.xMvG92eM.js";import{P as E}from"./plus.t7qQNRkr.js";import{C as T,a as R}from"./credit-card.Cdk-0iNQ.js";import"./search.B65NY9Yq.js";import"./x.DGcJ3xm4.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],O=u("clock",B);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],_=u("landmark",M);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],U=u("power",z);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Y=u("shield-check",F);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],w=u("shopping-bag",H);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],V=u("tv",q);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],G=u("zap",W);function j({children:t,variant:i="default",size:a="md",dot:o=!1,pulse:l=!1,className:s=""}){const c=`
    inline-flex items-center gap-1.5
    font-medium rounded-full
    whitespace-nowrap
    transition-colors duration-200
  `,d={default:"bg-theme-tertiary text-theme-secondary border border-theme",success:"bg-success-50 text-success-700 border border-success-200 dark:bg-success-600/15 dark:text-success-400 dark:border-success-600/30",warning:"bg-warning-50 text-warning-700 border border-warning-200 dark:bg-warning-600/15 dark:text-warning-400 dark:border-warning-600/30",danger:"bg-danger-50 text-danger-700 border border-danger-200 dark:bg-danger-600/15 dark:text-danger-400 dark:border-danger-600/30",info:"bg-info-50 text-info-700 border border-info-200 dark:bg-info-600/15 dark:text-info-400 dark:border-info-600/30",accent:"bg-accent-50 text-accent-700 border border-accent-200 dark:bg-accent-600/15 dark:text-accent-400 dark:border-accent-600/30"},h={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"},n={default:"bg-theme-muted",success:"bg-success-500",warning:"bg-warning-500",danger:"bg-danger-500",info:"bg-info-500",accent:"bg-accent-500"};return e.jsxs("span",{className:`${c} ${d[i]} ${h[a]} ${s}`,children:[o&&e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${n[i]} ${l?"animate-pulse-subtle":""}`}),t]})}function K({bill:t}){const[i,a]=y.useState(!1),[o,l]=y.useState(!1),s=async()=>{await fetch(`/api/bills/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!t.isActive})}),window.location.reload(),a(!1)},c=async()=>{confirm(`Are you sure you want to delete "${t.name}"?`)&&(l(!0),await fetch(`/api/bills/${t.id}`,{method:"DELETE"}),window.location.reload(),a(!1),l(!1))};return e.jsxs("div",{className:"relative",children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>a(!i),className:"h-8 w-8 p-0",children:e.jsx(D,{className:"h-4 w-4"})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 z-20 w-48 rounded-lg bg-theme-secondary border border-theme shadow-lg py-1",children:[e.jsxs("a",{href:`/dashboard/bills/${t.id}/edit`,onClick:()=>a(!1),className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-theme-secondary hover:bg-theme-tertiary hover:text-theme-primary",children:[e.jsx(A,{className:"h-4 w-4"}),"Edit"]}),e.jsxs("button",{onClick:s,className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-theme-secondary hover:bg-theme-tertiary hover:text-theme-primary",children:[e.jsx(U,{className:"h-4 w-4"}),t.isActive?"Deactivate":"Activate"]}),e.jsxs("button",{onClick:c,disabled:o,className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-400 hover:bg-theme-tertiary hover:text-red-300",children:[e.jsx($,{className:"h-4 w-4"}),o?"Deleting...":"Delete"]})]})]})]})}function Q({group:t}){const[i,a]=y.useState(!1),o=t.paidCount/t.totalCount*100,l=t.paidCount===t.totalCount;return e.jsxs("div",{className:"rounded-lg bg-theme-secondary overflow-hidden",children:[e.jsxs("button",{onClick:()=>a(!i),className:"w-full flex items-center justify-between py-3 px-4 hover:bg-theme-tertiary transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i?e.jsx(I,{className:"h-4 w-4 text-theme-muted"}):e.jsx(P,{className:"h-4 w-4 text-theme-muted"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-theme-primary",children:t.debtName}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-theme-secondary",children:[e.jsxs("span",{children:[t.paidCount," of ",t.totalCount," payments"]}),l?e.jsx(j,{variant:"success",children:"Paid Off"}):t.nextPayment&&e.jsxs("span",{className:"text-theme-muted",children:["• Next: $",t.nextPayment.amount.toFixed(2)," on"," ",new Date(t.nextPayment.dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-semibold text-theme-primary",children:["$",(t.totalAmount-t.bills.filter(s=>s.payments[0]?.status==="PAID").reduce((s,c)=>s+Number(c.amount),0)).toFixed(2)]}),e.jsx("p",{className:"text-xs text-theme-muted",children:"remaining"})]}),e.jsx("div",{className:"w-24 h-2 bg-theme-tertiary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-500 transition-all duration-300",style:{width:`${o}%`}})})]})]}),i&&e.jsx("div",{className:"border-t border-theme px-4 py-2 space-y-2",children:t.bills.map((s,c)=>{const d=s.payments[0]?.status==="PAID",h=s.payments[0]?.dueDate?new Date(s.payments[0].dueDate):null;return e.jsxs("div",{className:`flex items-center justify-between py-2 px-3 rounded ${d?"opacity-60":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx(S,{className:"h-4 w-4 text-accent-500"}):e.jsx(O,{className:"h-4 w-4 text-theme-muted"}),e.jsxs("span",{className:"text-sm text-theme-secondary",children:["Payment ",c+1]}),h&&e.jsx("span",{className:"text-xs text-theme-muted",children:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-sm font-medium ${d?"text-theme-muted line-through":"text-theme-primary"}`,children:["$",Number(s.amount).toFixed(2)]}),d&&e.jsx(j,{variant:"success",className:"text-xs",children:"Paid"})]})]},s.id)})})]})}const J={SUBSCRIPTION:"Subscriptions",UTILITY:"Utilities",LOAN:"Loans",BNPL:"Buy Now Pay Later",INSURANCE:"Insurance",CREDIT_CARD:"Credit Cards",OTHER:"Other"},Z={SUBSCRIPTION:V,UTILITY:G,LOAN:_,BNPL:w,INSURANCE:Y,CREDIT_CARD:T,OTHER:L};function X(t,i){return i?{ONCE:"One-time",WEEKLY:"Weekly",BIWEEKLY:"Bi-weekly",MONTHLY:"Monthly",YEARLY:"Yearly"}[t]||t:"One-time"}function ee(t){return!t.isRecurring&&t.payments.length>0?new Date(t.payments[0].dueDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):`Day ${t.dueDay}`}function je({regularBills:t,bnplGroups:i}){const[a,o]=y.useState(""),l=Object.keys(t),s={};for(const n of l){const x=t[n].filter(m=>{if(!a)return!0;const r=a.toLowerCase();return m.name.toLowerCase().includes(r)||m.category.toLowerCase().includes(r)||(m.notes?.toLowerCase().includes(r)??!1)||(m.debt?.name.toLowerCase().includes(r)??!1)});x.length>0&&(s[n]=x)}const c=i.filter(n=>{if(!a)return!0;const x=a.toLowerCase();return n.debtName.toLowerCase().includes(x)||n.bills.some(m=>m.name.toLowerCase().includes(x))}),d=Object.keys(s),h=d.length>0||c.length>0;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{value:a,onChange:o,placeholder:"Search bills...",className:"max-w-md"}),!h&&a?e.jsx(p,{children:e.jsxs(f,{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-theme-tertiary flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"h-8 w-8 text-theme-muted"})}),e.jsx("h3",{className:"text-lg font-semibold text-theme-primary mb-2",children:"No bills found"}),e.jsxs("p",{className:"text-theme-secondary",children:['No bills match "',a,'"']})]})}):h?e.jsxs("div",{className:"space-y-6",children:[c.length>0&&e.jsxs(p,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-theme-tertiary",children:e.jsx(w,{className:"h-5 w-5 text-theme-secondary"})}),e.jsxs("div",{children:[e.jsx(g,{children:"Buy Now Pay Later"}),e.jsxs("p",{className:"text-sm text-theme-secondary mt-0.5",children:[c.length," active plan",c.length!==1?"s":""]})]})]})}),e.jsx(f,{noPadding:!0,children:e.jsx("div",{className:"divide-y divide-theme",children:c.map(n=>e.jsx(Q,{group:n},n.debtId))})})]}),d.map((n,x)=>{const m=Z[n];return e.jsxs(p,{className:`animate-fade-in-up stagger-${x+1}`,children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-theme-tertiary",children:e.jsx(m,{className:"h-5 w-5 text-theme-secondary"})}),e.jsxs("div",{children:[e.jsx(g,{children:J[n]}),e.jsxs("p",{className:"text-sm text-theme-secondary mt-0.5",children:[s[n].length," bill",s[n].length!==1?"s":""]})]})]})}),e.jsx(f,{noPadding:!0,children:e.jsx("div",{className:"divide-y divide-theme",children:s[n].map(r=>e.jsxs("div",{className:`flex items-center justify-between py-4 px-6 hover:bg-theme-secondary/50 transition-colors ${r.isActive?"":"opacity-50"}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"font-medium text-theme-primary",children:r.name}),!r.isActive&&e.jsx(j,{variant:"default",size:"sm",children:"Inactive"}),r.debt&&e.jsx(j,{variant:"warning",size:"sm",children:"Linked to debt"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-theme-secondary",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),ee(r)]}),e.jsx("span",{className:"text-theme-muted",children:"•"}),e.jsx("span",{children:X(r.frequency,r.isRecurring)})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-lg font-semibold text-theme-primary",children:["$",Number(r.amount).toFixed(2)]}),e.jsx(K,{bill:{id:r.id,name:r.name,isActive:r.isActive}})]})]},r.id))})})]},n)})]}):e.jsx(p,{children:e.jsxs(f,{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-theme-tertiary flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"h-8 w-8 text-theme-muted"})}),e.jsx("h3",{className:"text-lg font-semibold text-theme-primary mb-2",children:"No bills yet"}),e.jsx("p",{className:"text-theme-secondary mb-6",children:"Add your first bill to start tracking your expenses"}),e.jsx(C,{href:"/dashboard/bills/new",children:e.jsx(v,{leftIcon:e.jsx(E,{className:"h-4 w-4"}),children:"Add Your First Bill"})})]})})]})}export{je as BillsList};
//# sourceMappingURL=bills-list.CFePdMJz.js.map
