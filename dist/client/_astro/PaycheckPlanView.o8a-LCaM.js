import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Cd_vQiNd.js";import{C as c,c as o,a as D,b as R}from"./card.CxXQM9B9.js";import{T as N}from"./triangle-alert.CsgL7Lr6.js";import{W as T}from"./wallet.-jnlrgP3.js";import{T as M}from"./target.BCJb0dyN.js";import{P as S}from"./piggy-bank.63Q_NMAF.js";import{T as C}from"./trending-down.Cc3M3PIz.js";import{C as w}from"./circle-check.DAlLMW5e.js";import{c as E}from"./createLucideIcon.DV6VgPWa.js";import{Z as F}from"./zap.BXKQm3Pc.js";import{C as _}from"./credit-card.BTOJU1Ei.js";import{f as u}from"./format.CSQe5d3I.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],B=E("arrow-right",I);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Y=E("circle",L);function r(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a)}function b({step:a,isCompleted:s,onToggle:m,isLoading:i}){const x=()=>{switch(a.type){case"TRANSFER":return e.jsx(B,{className:"h-5 w-5"});case"BILL_PAYMENT":return e.jsx(_,{className:"h-5 w-5"});case"EXTRA_DEBT_PAYMENT":return e.jsx(F,{className:"h-5 w-5"});case"SAVINGS_TRANSFER":return e.jsx(S,{className:"h-5 w-5"});default:return e.jsx(T,{className:"h-5 w-5"})}},y=()=>{if(s)return"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-800";switch(a.type){case"TRANSFER":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"BILL_PAYMENT":return"bg-white dark:bg-[#1c2128] border-gray-200 dark:border-[#30363d]";case"EXTRA_DEBT_PAYMENT":return"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800";case"SAVINGS_TRANSFER":return"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800";default:return"bg-white dark:bg-[#1c2128] border-gray-200 dark:border-[#30363d]"}},l=()=>{if(s)return"text-emerald-600 dark:text-emerald-400";switch(a.type){case"TRANSFER":return"text-blue-600 dark:text-blue-400";case"EXTRA_DEBT_PAYMENT":return"text-amber-600 dark:text-amber-400";case"SAVINGS_TRANSFER":return"text-purple-600 dark:text-purple-400";default:return"text-gray-600 dark:text-gray-400"}};return e.jsxs("div",{onClick:()=>!i&&m(),className:`
        flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer
        transition-all duration-200 hover:shadow-md
        ${y()}
        ${s?"opacity-75":""}
      `,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i?e.jsx("div",{className:"h-6 w-6 rounded-full border-2 border-gray-300 border-t-blue-600 animate-spin"}):s?e.jsx(w,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"}):e.jsx(Y,{className:"h-6 w-6 text-gray-400 dark:text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:l(),children:x()}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400",children:a.type.replace(/_/g," ")})]}),e.jsx("p",{className:`font-medium ${s?"line-through text-gray-500":"text-gray-900 dark:text-gray-100"}`,children:a.label}),a.dueDate&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Due: ",u(new Date(a.dueDate),"MMM d, yyyy")]})]}),e.jsx("div",{className:"flex-shrink-0 text-right",children:e.jsx("p",{className:`text-lg font-semibold ${s?"text-gray-500 line-through":"text-gray-900 dark:text-gray-100"}`,children:r(a.amount)})})]})}function k({progress:a,label:s,color:m="blue"}){const i={blue:"bg-blue-600 dark:bg-blue-500",emerald:"bg-emerald-600 dark:bg-emerald-500",amber:"bg-amber-600 dark:bg-amber-500"};return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:[(a*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${i[m]} transition-all duration-500`,style:{width:`${Math.min(100,a*100)}%`}})})]})}function Q(){const[a,s]=n.useState(null),[m,i]=n.useState(!0),[x,y]=n.useState(null),[l,f]=n.useState(new Set),[h,v]=n.useState(null);n.useEffect(()=>{j();const t=localStorage.getItem("paycheck-plan-completed");if(t)try{const d=JSON.parse(t);d.periodStart===a?.period.startDate&&f(new Set(d.steps))}catch{}},[]),n.useEffect(()=>{a&&localStorage.setItem("paycheck-plan-completed",JSON.stringify({periodStart:a.period.startDate,steps:Array.from(l)}))},[l,a]);async function j(){try{i(!0);const t=await fetch("/api/paycheck-plan");if(!t.ok)throw new Error("Failed to fetch plan");const d=await t.json();s(d)}catch(t){y(t instanceof Error?t.message:"Failed to load plan")}finally{i(!1)}}async function g(t){if(l.has(t.id)){f(d=>{const P=new Set(d);return P.delete(t.id),P});return}v(t.id);try{t.type==="BILL_PAYMENT"&&t.billPaymentId?await fetch(`/api/bill-payments/${t.billPaymentId}/pay`,{method:"POST"}):t.type==="EXTRA_DEBT_PAYMENT"&&t.debtId?await fetch("/api/paycheck-plan/extra-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({debtId:t.debtId,amount:t.amount})}):t.type==="SAVINGS_TRANSFER"&&await fetch("/api/paycheck-plan/emergency-fund",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t.amount})}),f(d=>new Set([...d,t.id])),(t.type==="EXTRA_DEBT_PAYMENT"||t.type==="BILL_PAYMENT")&&j()}catch(d){console.error("Failed to process step:",d)}finally{v(null)}}if(m)return e.jsxs("div",{className:"space-y-4 animate-pulse",children:[e.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-xl"}),e.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded-xl"}),e.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded-xl"})]});if(x||!a)return e.jsx(c,{variant:"outlined",className:"border-red-200 dark:border-red-800",children:e.jsxs(o,{className:"py-8 text-center",children:[e.jsx(N,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600 dark:text-red-400 font-medium",children:x||"Failed to load plan"}),e.jsx("button",{onClick:j,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})});const A=`${u(new Date(a.period.startDate),"MMM d")} - ${u(new Date(a.period.endDate),"MMM d, yyyy")}`,p=a.steps.length>0?l.size/a.steps.length*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(c,{variant:"gradient",className:"relative overflow-hidden",children:e.jsxs(o,{className:"py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(T,{className:"h-5 w-5 text-white/80"}),e.jsx("span",{className:"text-sm text-white/80 font-medium",children:"Paycheck Plan"})]}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:r(a.paycheckAmount)}),e.jsx("p",{className:"text-white/70",children:A}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/60 uppercase tracking-wide",children:"Total Bills"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r(a.totalBillsThisPeriod)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/60 uppercase tracking-wide",children:"Remaining"}),e.jsx("p",{className:"text-lg font-semibold text-amber-300",children:r(a.billsRemainingThisPeriod)}),a.billsPaidThisPeriod>0&&e.jsxs("p",{className:"text-xs text-white/50",children:[r(a.billsPaidThisPeriod)," paid"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/60 uppercase tracking-wide",children:"Spending"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r(a.discretionaryThisPaycheck)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/60 uppercase tracking-wide",children:"True Surplus"}),e.jsx("p",{className:`text-lg font-semibold ${a.surplusSplit.isNegative?"text-red-300":"text-emerald-300"}`,children:r(a.surplusSplit.surplus)})]})]}),p>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/70 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[p.toFixed(0),"% complete"]})]}),e.jsx("div",{className:"h-2 bg-white/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white transition-all duration-500",style:{width:`${p}%`}})})]})]})}),a.surplusSplit.isNegative&&e.jsx(c,{variant:"outlined",className:"border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/20",children:e.jsx(o,{className:"py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-red-800 dark:text-red-200",children:["You're short ",r(Math.abs(a.surplusSplit.surplus))," this paycheck"]}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Your bills and spending budget exceed your paycheck. Consider which payments can be delayed or reduced."})]})]})})}),a.transfers.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm",children:"1"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Move Money Between Accounts"})]}),e.jsx("div",{className:"space-y-3",children:a.transfers.map(t=>e.jsx(b,{step:t,isCompleted:l.has(t.id),onToggle:()=>g(t),isLoading:h===t.id},t.id))})]}),a.billPayments.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 text-white flex items-center justify-center font-bold text-sm",children:"2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pay Bills (In Order)"})]}),e.jsx("div",{className:"space-y-3",children:a.billPayments.map(t=>e.jsx(b,{step:t,isCompleted:l.has(t.id),onToggle:()=>g(t),isLoading:h===t.id},t.id))})]}),a.extraDebtStep&&a.avalancheTarget&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-600 text-white flex items-center justify-center font-bold text-sm",children:"3"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Extra Debt Attack (Avalanche)"})]}),e.jsx(c,{variant:"outlined",className:"mb-3 border-amber-200 dark:border-amber-800 bg-amber-50/50 dark:bg-amber-900/10",children:e.jsxs(o,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(M,{className:"h-6 w-6 text-amber-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["Target: ",a.avalancheTarget.debtName]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.avalancheTarget.interestRate.toFixed(2),"% APR â€¢ Balance: ",r(a.avalancheTarget.currentBalance)]})]})]}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"This is your highest-APR debt. Every extra dollar here saves you the most in interest."})]})}),e.jsx(b,{step:a.extraDebtStep,isCompleted:l.has(a.extraDebtStep.id),onToggle:()=>g(a.extraDebtStep),isLoading:h===a.extraDebtStep.id})]}),a.savingsStep&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold text-sm",children:"4"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Build Emergency Fund"})]}),e.jsx(c,{variant:"outlined",className:"mb-3 border-purple-200 dark:border-purple-800 bg-purple-50/50 dark:bg-purple-900/10",children:e.jsxs(o,{className:"py-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"h-6 w-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Emergency Fund"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r(a.emergencyFundCurrent)," / ",r(a.emergencyFundTarget)]})]})]})}),e.jsx(k,{progress:a.emergencyFundCurrent/a.emergencyFundTarget,label:"Progress to Goal",color:"emerald"})]})}),e.jsx(b,{step:a.savingsStep,isCompleted:l.has(a.savingsStep.id),onToggle:()=>g(a.savingsStep),isLoading:h===a.savingsStep.id})]}),a.payoffProgress.targetDate&&e.jsxs(c,{children:[e.jsx(D,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-emerald-600"}),"Path to Debt Freedom"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Current Debt"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:r(a.payoffProgress.currentDebt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Target Date"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:u(new Date(a.payoffProgress.targetDate),"MMM yyyy")})]})]}),a.payoffProgress.debtPaid!==void 0&&a.payoffProgress.startDebt&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Debt Paid Off"}),e.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:r(a.payoffProgress.debtPaid)})]}),e.jsx(k,{progress:a.payoffProgress.debtProgressPct??0,label:"Debt Progress",color:"emerald"})]}),a.payoffProgress.timeProgressPct!==void 0&&e.jsx(k,{progress:a.payoffProgress.timeProgressPct,label:"Time Elapsed",color:"blue"}),a.payoffProgress.onTrack!==void 0&&e.jsx("div",{className:`flex items-center gap-2 p-3 rounded-lg ${a.payoffProgress.onTrack?"bg-emerald-50 dark:bg-emerald-900/20":"bg-amber-50 dark:bg-amber-900/20"}`,children:a.payoffProgress.onTrack?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"You're on track! Keep it up!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-medium text-amber-700 dark:text-amber-400",children:"Slightly behind - focus on extra payments"})]})}),a.payoffProgress.monthsRemaining&&a.payoffProgress.monthsRemaining>0&&e.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a.payoffProgress.monthsRemaining})," ","months until target date"]})]})]}),p===100&&e.jsx(c,{variant:"outlined",className:"border-emerald-300 dark:border-emerald-700 bg-emerald-50 dark:bg-emerald-900/20",children:e.jsxs(o,{className:"py-8 text-center",children:[e.jsx(w,{className:"h-16 w-16 text-emerald-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-emerald-800 dark:text-emerald-200 mb-2",children:"All Done!"}),e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300",children:"You've completed all tasks for this pay period. Great job staying on track!"})]})})]})}export{Q as PaycheckPlanView};
//# sourceMappingURL=PaycheckPlanView.o8a-LCaM.js.map
