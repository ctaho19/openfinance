import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as m}from"./index.Cd_vQiNd.js";import{b as M}from"./bank-badge.AOlTl-fr.js";import{f as N}from"./format.CSQe5d3I.js";import{T as v}from"./trending-up.-SPj7Q4X.js";import{C as u}from"./chevron-down.DUqbYN4x.js";import{D as B}from"./dollar-sign.CHVyf0eC.js";import{C as $}from"./calendar.5JjKPgNr.js";import{T as F}from"./triangle-alert.CsgL7Lr6.js";import{c as S}from"./createLucideIcon.DV6VgPWa.js";import{C as A}from"./chevron-right.BPMsxEET.js";import"./building-2.CScN-oDP.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],P=S("chevron-up",L);function G({forecastData:t,paycheckAmount:n}){const[d,r]=m.useState(3),[a,h]=m.useState(!1),p=m.useMemo(()=>t.slice(0,d),[t,d]),l=m.useMemo(()=>{const s=t.reduce((i,x)=>i+x.totalBills,0),o=t.reduce((i,x)=>i+x.paymentCount,0),w=t.length>0?s/t.length:0,b=new Map;t.forEach(i=>{const x=N(new Date(i.period.startDate),"MMM yyyy");b.set(x,(b.get(x)||0)+i.totalBills)});let k="",j=0;b.forEach((i,x)=>{i>j&&(j=i,k=x)});const C=t.filter(i=>i.projectedBalance<0).length;return{totalBillsAmount:s,totalBillCount:o,avgPerPeriod:w,highestMonth:k,highestAmount:j,periodsWithDeficit:C}},[t]),g=()=>{r(s=>Math.min(s+6,t.length))},y=()=>{r(3),h(!1)},c=()=>{r(a?3:t.length),h(!a)};return e.jsxs("div",{className:"bg-white dark:bg-[#1c2128] rounded-xl border border-gray-200 dark:border-[#30363d] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-[#21262d] transition-colors",onClick:c,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(v,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Annual Forecast"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Next ",t.length," pay periods (",Math.round(t.length/2)," months)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full",children:["$",l.totalBillsAmount.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})," total"]}),e.jsx(u,{className:`h-5 w-5 text-gray-400 transition-transform duration-200 ${a?"rotate-180":""}`})]})]}),a&&e.jsxs("div",{className:"px-5 pb-5",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-5",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Total Bills"})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["$",l.totalBillsAmount.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l.totalBillCount," payments"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Avg/Period"})]}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["$",l.avgPerPeriod.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"per pay period"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(v,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Highest Month"})]}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:l.highestMonth||"N/A"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["$",l.highestAmount.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})," in bills"]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(F,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Tight Periods"})]}),e.jsx("p",{className:`text-lg font-semibold ${l.periodsWithDeficit>0?"text-red-600 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"}`,children:l.periodsWithDeficit}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"projected deficit"})]})]}),e.jsx("div",{className:"space-y-2",children:p.map((s,o)=>e.jsx(f,{forecast:s,paycheckAmount:n,index:o},o))}),t.length>3&&e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4 pt-4 border-t border-gray-100 dark:border-gray-800",children:[d<t.length&&e.jsxs("button",{onClick:s=>{s.stopPropagation(),g()},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:[e.jsx(u,{className:"h-4 w-4"}),"Show More (",t.length-d," remaining)"]}),d>3&&e.jsxs("button",{onClick:s=>{s.stopPropagation(),y()},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[e.jsx(P,{className:"h-4 w-4"}),"Show Less"]})]})]}),!a&&e.jsxs("div",{className:"px-5 pb-5",children:[e.jsx("div",{className:"space-y-2",children:p.slice(0,3).map((s,o)=>e.jsx(f,{forecast:s,paycheckAmount:n,index:o,compact:!0},o))}),t.length>3&&e.jsxs("button",{onClick:s=>{s.stopPropagation(),c()},className:"w-full mt-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"View Full Year Forecast (",t.length-3," more periods)"]})]})]})}function f({forecast:t,paycheckAmount:n,index:d,compact:r}){const[a,h]=m.useState(!1),p=new Date(t.period.startDate),l=new Date(t.period.endDate),g=n>0?Math.min(t.totalBills/n*100,100):0,y=s=>s>=90?"bg-red-500":s>=70?"bg-amber-500":"bg-emerald-500",c=t.allocations&&t.allocations.length>0;return e.jsxs("div",{className:"rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800/50 ${r?"":"hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"} ${c&&!r?"cursor-pointer":""}`,onClick:()=>c&&!r&&h(!a),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[c&&!r?e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0",children:e.jsx(A,{className:`h-4 w-4 text-blue-600 dark:text-blue-400 transition-transform ${a?"rotate-90":""}`})}):e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400",children:d+1})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:[N(p,"MMM d")," - ",N(l,"MMM d")]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.paymentCount," ",t.paymentCount===1?"bill":"bills"," · $",t.totalBills.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[!r&&e.jsxs("div",{className:"hidden sm:block w-24",children:[e.jsx("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${y(g)} rounded-full transition-all`,style:{width:`${g}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:[g.toFixed(0),"% used"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Balance"}),e.jsxs("p",{className:`font-semibold ${t.projectedBalance>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:["$",t.projectedBalance.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]}),a&&c&&e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800/30 px-3 pb-3 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide pt-2 px-2",children:"Bank Allocations"}),t.allocations.map((s,o)=>e.jsx(E,{allocation:s},s.accountId||`unassigned-${o}`))]})]})}function E({allocation:t}){const[n,d]=m.useState(!1);return e.jsxs("div",{className:"bg-white dark:bg-[#1c2128] rounded-lg border border-gray-200 dark:border-[#30363d] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-[#21262d] transition-colors",onClick:()=>d(!n),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{bank:t.bank,size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm",children:t.accountName}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.bills.length," ",t.bills.length===1?"bill":"bills",t.lastFour&&` · •••• ${t.lastFour}`]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["$",t.total.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{className:`h-4 w-4 text-gray-400 transition-transform ${n?"rotate-180":""}`})]})]}),n&&e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800 px-3 pb-2",children:t.bills.map((r,a)=>e.jsxs("div",{className:"flex items-center justify-between py-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.dueDate})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["$",r.amount.toLocaleString(void 0,{minimumFractionDigits:2})]})]},a))})]})}export{G as AnnualForecast};
//# sourceMappingURL=AnnualForecast.GHlXeWiI.js.map
