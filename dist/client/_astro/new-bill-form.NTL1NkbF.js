import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.Cd_vQiNd.js";import{C,a as k,b as A,c as w}from"./card.CxXQM9B9.js";import{B as o}from"./button.9NTnJrUv.js";import{B}from"./bank-badge.CzvcH6o2.js";import{A as S}from"./arrow-left.CGCSNnMn.js";import"./createLucideIcon.DV6VgPWa.js";const I=[{value:"SUBSCRIPTION",label:"Subscription"},{value:"UTILITY",label:"Utility"},{value:"LOAN",label:"Loan"},{value:"BNPL",label:"Buy Now Pay Later"},{value:"INSURANCE",label:"Insurance"},{value:"CREDIT_CARD",label:"Credit Card"},{value:"OTHER",label:"Other"}],E=[{value:"ONCE",label:"One-time"},{value:"WEEKLY",label:"Weekly"},{value:"BIWEEKLY",label:"Bi-weekly"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}];function Y(){const[d,m]=r.useState(!1),[u,h]=r.useState(""),[x,f]=r.useState([]),[b,g]=r.useState([]),[p,y]=r.useState(""),[t,j]=r.useState({name:"",category:"OTHER",amount:"",dueDay:"",isRecurring:!0,frequency:"MONTHLY",debtId:"",notes:""});r.useEffect(()=>{Promise.all([fetch("/api/debts").then(a=>a.json()),fetch("/api/bank-accounts").then(a=>a.json())]).then(([a,s])=>{if(Array.isArray(a)&&f(a),Array.isArray(s)){g(s);const c=s.find(i=>i.isDefault);c&&y(c.id)}}).catch(()=>{})},[]);const N=async a=>{a.preventDefault(),h(""),m(!0);try{const s=await fetch("/api/bills",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,bankAccountId:p||null})});if(!s.ok){const c=await s.json();throw new Error(c.error||"Failed to create bill")}window.location.href="/dashboard/bills"}catch(s){h(s instanceof Error?s.message:"Something went wrong")}finally{m(!1)}},l=a=>{const{name:s,value:c,type:i}=a.target;j(v=>({...v,[s]:i==="checkbox"?a.target.checked:c}))},n="w-full px-4 py-2 bg-theme-secondary border border-theme rounded-xl text-theme-primary placeholder-theme-muted focus:outline-none focus:ring-2 focus:ring-accent-500/20 focus:border-accent-500";return e.jsxs("div",{className:"animate-fade-in space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"/dashboard/bills",children:e.jsx(o,{variant:"ghost",size:"sm",leftIcon:e.jsx(S,{className:"h-4 w-4"}),children:"Back"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-theme-primary",children:"Add New Bill"}),e.jsx("p",{className:"text-theme-secondary mt-1",children:"Create a new recurring bill or payment"})]})]}),e.jsxs(C,{children:[e.jsx(k,{children:e.jsx(A,{children:"Bill Details"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[u&&e.jsx("div",{className:"p-3 rounded-xl bg-danger-50 dark:bg-danger-600/10 border border-danger-200 dark:border-danger-600/30 text-danger-700 dark:text-danger-400 text-sm",children:u}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme-secondary",children:"Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",required:!0,autoFocus:!0,value:t.name,onChange:l,placeholder:"e.g., Netflix, Electric Bill",className:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-theme-secondary",children:"Category"}),e.jsx("select",{id:"category",name:"category",value:t.category,onChange:l,className:n,children:I.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-theme-secondary",children:"Amount *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-theme-muted",children:"$"}),e.jsx("input",{type:"number",id:"amount",name:"amount",required:!0,min:"0",step:"0.01",inputMode:"decimal",value:t.amount,onChange:l,placeholder:"0.00",className:`${n} pl-8`})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"dueDay",className:"block text-sm font-medium text-theme-secondary",children:"Due Day (1-31) *"}),e.jsx("input",{type:"number",id:"dueDay",name:"dueDay",required:!0,min:"1",max:"31",value:t.dueDay,onChange:l,placeholder:"15",className:n})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isRecurring",name:"isRecurring",checked:t.isRecurring,onChange:l,className:"h-4 w-4 rounded border-theme bg-theme-secondary text-accent-600 focus:ring-accent-500 focus:ring-offset-theme-primary"}),e.jsx("label",{htmlFor:"isRecurring",className:"text-sm font-medium text-theme-secondary",children:"This is a recurring bill"})]}),t.isRecurring&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"frequency",className:"block text-sm font-medium text-theme-secondary",children:"Frequency"}),e.jsx("select",{id:"frequency",name:"frequency",value:t.frequency,onChange:l,className:n,children:E.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),x.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"debtId",className:"block text-sm font-medium text-theme-secondary",children:"Link to Debt Account (Optional)"}),e.jsxs("select",{id:"debtId",name:"debtId",value:t.debtId,onChange:l,className:n,children:[e.jsx("option",{value:"",children:"None"}),x.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",a.type.toLowerCase().replace("_"," "),")"]},a.id))]})]}),b.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-theme-secondary",children:"Payment Bank Account"}),e.jsx(B,{value:p,onChange:y,banks:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-theme-secondary",children:"Notes (Optional)"}),e.jsx("textarea",{id:"notes",name:"notes",rows:3,value:t.notes,onChange:l,placeholder:"Any additional notes about this bill...",className:`${n} resize-none`})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(o,{type:"submit",disabled:d,children:d?"Creating...":"Create Bill"}),e.jsx("a",{href:"/dashboard/bills",children:e.jsx(o,{type:"button",variant:"secondary",children:"Cancel"})})]})]})})]})]})}export{Y as default};
//# sourceMappingURL=new-bill-form.NTL1NkbF.js.map
