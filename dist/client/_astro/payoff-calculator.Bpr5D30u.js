import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as b}from"./index.Cd_vQiNd.js";import{C as h,c as x,a as C,b as S}from"./card.CxXQM9B9.js";import{B as D}from"./button.B0dCfUPv.js";import{c as B}from"./createLucideIcon.DV6VgPWa.js";import{A as R}from"./arrow-left.CGCSNnMn.js";import{F as E}from"./file-text.C5K_yrNJ.js";import{H as L,B as F,G as O,C as U,T as _}from"./trending-down.BPkNJrSy.js";import{S as G}from"./shopping-bag.DyV4UZ3S.js";import{C as H}from"./credit-card.BTOJU1Ei.js";import{C as Y}from"./check.D23q9GVG.js";import{D as W}from"./dollar-sign.CHVyf0eC.js";import{C as z}from"./calendar.5JjKPgNr.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],M=B("calculator",q);function A(s){const{balance:a,apr:n,minimumPayment:m,extraPayment:f=0}=s;if(a<=0)return{months:0,totalPayment:0,totalInterest:0,payoffDate:new Date,schedule:[]};const d=m+f,N=n/100/12;if(d<=0)return null;const g=[];let p=a,w=0,P=0,j=0;const u=600;for(;p>.01&&j<u;){j++;const y=p*N;if(d<=y&&n>0)return null;const l=Math.min(d,p+y),c=l-y;p=Math.max(0,p-c),w+=l,P+=y,g.push({month:j,payment:l,principal:c,interest:y,balance:p})}if(j>=u)return null;const r=new Date;return r.setMonth(r.getMonth()+j),{months:j,totalPayment:w,totalInterest:P,payoffDate:r,schedule:g}}function J(s){const a=A({...s,extraPayment:0}),n=s.extraPayment&&s.extraPayment>0?A(s):a,m=(a?.months??0)-(n?.months??0),f=(a?.totalInterest??0)-(n?.totalInterest??0);return{withMinimum:a,withExtra:n,monthsSaved:m,interestSaved:f}}function k(s){const a=Math.floor(s/12),n=s%12;return a===0?`${n} month${n!==1?"s":""}`:n===0?`${a} year${a!==1?"s":""}`:`${a}y ${n}mo`}const K={CREDIT_CARD:H,AUTO_LOAN:U,STUDENT_LOAN:O,PERSONAL_LOAN:F,BNPL:G,MORTGAGE:L,OTHER:E};function v(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s)}function I(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)}function de(){const[s,a]=b.useState([]),[n,m]=b.useState(!0),[f,d]=b.useState(new Set),[N,g]=b.useState("");b.useEffect(()=>{p()},[]);async function p(){try{const t=await fetch("/api/debts");if(t.ok){const o=(await t.json()).filter($=>Number($.currentBalance)>0);a(o),o.length>0&&d(new Set([o[0].id]))}}finally{m(!1)}}function w(t){d(i=>{const o=new Set(i);return o.has(t)?o.delete(t):o.add(t),o})}function P(){d(new Set(s.map(t=>t.id)))}function j(){d(new Set)}const u=s.filter(t=>f.has(t.id)),r=b.useMemo(()=>u.reduce((t,i)=>({balance:t.balance+Number(i.currentBalance),minimumPayment:t.minimumPayment+Number(i.minimumPayment),weightedApr:t.weightedApr+Number(i.interestRate)*Number(i.currentBalance)}),{balance:0,minimumPayment:0,weightedApr:0}),[u]),y=r.balance>0?r.weightedApr/r.balance:0,l=parseFloat(N)||0,c=b.useMemo(()=>u.length===0||r.balance<=0?null:J({balance:r.balance,apr:y,minimumPayment:r.minimumPayment,extraPayment:l}),[u,r,y,l]);return n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("header",{children:e.jsx("h1",{className:"text-2xl font-bold text-theme-primary",children:"Debt Payoff Calculator"})}),e.jsx(h,{children:e.jsx(x,{className:"py-16 text-center",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 w-48 bg-theme-tertiary rounded mx-auto"}),e.jsx("div",{className:"h-4 w-64 bg-theme-tertiary rounded mx-auto"})]})})})]}):s.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsx("header",{children:e.jsx("h1",{className:"text-2xl font-bold text-theme-primary",children:"Debt Payoff Calculator"})}),e.jsx(h,{children:e.jsxs(x,{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-accent-50 dark:bg-accent-600/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"h-8 w-8 text-accent-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-theme-primary mb-2",children:"No Active Debts"}),e.jsx("p",{className:"text-theme-secondary mb-6",children:"Add some debts first to calculate your payoff timeline."}),e.jsx("a",{href:"/dashboard/debts/new",children:e.jsx(D,{children:"Add Your First Debt"})})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-theme-primary",children:"Debt Payoff Calculator"}),e.jsx("p",{className:"text-theme-secondary mt-1",children:"See how extra payments can accelerate your debt payoff"})]}),e.jsx("a",{href:"/dashboard/debts",children:e.jsx(D,{variant:"ghost",leftIcon:e.jsx(R,{className:"h-4 w-4"}),children:"Back"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[e.jsxs(h,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:"Select Debts"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:P,className:"text-xs text-accent-600 hover:text-accent-700 font-medium",children:"All"}),e.jsx("span",{className:"text-theme-muted",children:"·"}),e.jsx("button",{onClick:j,className:"text-xs text-accent-600 hover:text-accent-700 font-medium",children:"None"})]})]})}),e.jsx(x,{noPadding:!0,children:e.jsx("div",{className:"divide-y divide-theme",children:s.map(t=>{const i=f.has(t.id),o=K[t.type]||E;return e.jsxs("button",{onClick:()=>w(t.id),className:`
                        w-full flex items-center gap-3 p-4 text-left transition-colors
                        ${i?"bg-accent-50 dark:bg-accent-600/10":"hover:bg-theme-secondary"}
                      `,children:[e.jsx("div",{className:`
                        w-5 h-5 rounded border-2 flex items-center justify-center shrink-0
                        transition-colors
                        ${i?"bg-accent-600 border-accent-600 text-white":"border-gray-300 dark:border-gray-600"}
                      `,children:i&&e.jsx(Y,{className:"h-3 w-3"})}),e.jsx("div",{className:"p-1.5 rounded bg-theme-tertiary shrink-0",children:e.jsx(o,{className:"h-4 w-4 text-theme-secondary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-theme-primary truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-theme-muted",children:[v(Number(t.currentBalance))," · ",t.interestRate,"% APR"]})]})]},t.id)})})})]}),e.jsxs(h,{children:[e.jsx(C,{children:e.jsx(S,{children:"Extra Monthly Payment"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-theme-muted"}),e.jsx("input",{type:"number",min:"0",step:"50",value:N,onChange:t=>g(t.target.value),placeholder:"0",className:`
                    w-full pl-10 pr-4 py-3 rounded-xl
                    bg-theme-secondary border border-theme
                    text-theme-primary text-lg font-medium
                    placeholder:text-theme-muted
                    focus:outline-none focus:ring-2 focus:ring-accent-600 focus:border-transparent
                  `})]}),e.jsx("p",{className:"text-xs text-theme-muted mt-2",children:"Enter an additional amount to pay each month"}),e.jsx("div",{className:"flex gap-2 mt-3",children:[50,100,200,500].map(t=>e.jsxs("button",{onClick:()=>g(t.toString()),className:`
                      flex-1 py-2 rounded-lg text-sm font-medium transition-colors
                      ${N===t.toString()?"bg-accent-600 text-white":"bg-theme-tertiary text-theme-secondary hover:bg-theme-secondary"}
                    `,children:["$",t]},t))})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:u.length===0?e.jsx(h,{children:e.jsxs(x,{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-theme-tertiary flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"h-8 w-8 text-theme-muted"})}),e.jsx("h3",{className:"text-lg font-semibold text-theme-primary mb-2",children:"Select debts to calculate"}),e.jsx("p",{className:"text-theme-secondary",children:"Choose one or more debts from the list to see your payoff timeline"})]})}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(h,{children:e.jsxs(x,{className:"py-4",children:[e.jsx("p",{className:"text-xs text-theme-muted uppercase tracking-wide mb-1",children:"Total Balance"}),e.jsx("p",{className:"text-xl font-bold text-theme-primary",children:v(r.balance)})]})}),e.jsx(h,{children:e.jsxs(x,{className:"py-4",children:[e.jsx("p",{className:"text-xs text-theme-muted uppercase tracking-wide mb-1",children:"Monthly Payment"}),e.jsx("p",{className:"text-xl font-bold text-theme-primary",children:v(r.minimumPayment+l)}),l>0&&e.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["+",v(l)," extra"]})]})}),e.jsx(h,{children:e.jsxs(x,{className:"py-4",children:[e.jsx("p",{className:"text-xs text-theme-muted uppercase tracking-wide mb-1",children:"Avg. APR"}),e.jsxs("p",{className:"text-xl font-bold text-theme-primary",children:[y.toFixed(1),"%"]})]})}),e.jsx(h,{children:e.jsxs(x,{className:"py-4",children:[e.jsx("p",{className:"text-xs text-theme-muted uppercase tracking-wide mb-1",children:"Debts Selected"}),e.jsx("p",{className:"text-xl font-bold text-theme-primary",children:u.length})]})})]}),e.jsxs(h,{children:[e.jsx(C,{children:e.jsx(S,{children:"Payoff Comparison"})}),e.jsx(x,{children:c.withMinimum===null?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-danger-600 dark:text-danger-400 font-medium",children:"Minimum payment is too low to pay off this debt"}),e.jsx("p",{className:"text-theme-secondary text-sm mt-2",children:"The monthly interest exceeds your minimum payment"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(T,{title:"With Minimum Payments",result:c.withMinimum,isHighlighted:!1,payment:r.minimumPayment}),l>0&&c.withExtra&&e.jsx(T,{title:"With Extra Payments",result:c.withExtra,isHighlighted:!0,payment:r.minimumPayment+l})]}),l>0&&c.monthsSaved>0&&e.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-600/10 border border-emerald-200 dark:border-emerald-600/30 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2.5 rounded-lg bg-emerald-100 dark:bg-emerald-600/20",children:e.jsx(_,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-emerald-700 dark:text-emerald-400",children:["You'll save ",k(c.monthsSaved),"!"]}),e.jsxs("p",{className:"text-emerald-600 dark:text-emerald-400/80 mt-1",children:["Plus ",e.jsx("strong",{children:I(c.interestSaved)})," in interest charges"]})]})]})}),e.jsx(Q,{withMinimum:c.withMinimum,withExtra:c.withExtra,hasExtra:l>0})]})})]})]}):null})]})]})}function T({title:s,result:a,isHighlighted:n,payment:m}){return e.jsxs("div",{className:`
      rounded-xl border p-5 transition-all
      ${n?"border-accent-300 dark:border-accent-600/50 bg-accent-50/50 dark:bg-accent-600/5":"border-theme bg-theme-secondary"}
    `,children:[e.jsx("h4",{className:`font-semibold mb-4 ${n?"text-accent-600":"text-theme-secondary"}`,children:s}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-theme-muted",children:"Monthly Payment"}),e.jsx("span",{className:"font-medium text-theme-primary",children:v(m)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-theme-muted",children:"Time to Payoff"}),e.jsx("span",{className:"font-medium text-theme-primary",children:k(a.months)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-theme-muted",children:"Payoff Date"}),e.jsx("span",{className:"font-medium text-theme-primary",children:a.payoffDate.toLocaleDateString("en-US",{month:"short",year:"numeric"})})]}),e.jsx("div",{className:"border-t border-theme pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-theme-muted",children:"Total Interest"}),e.jsx("span",{className:`font-bold ${n?"text-emerald-600 dark:text-emerald-400":"text-theme-primary"}`,children:I(a.totalInterest)})]})})]})]})}function Q({withMinimum:s,withExtra:a,hasExtra:n}){const m=s.months,f=a?.months??m,d=100,N=m>0?f/m*100:100;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-theme-primary flex items-center gap-2",children:[e.jsx(z,{className:"h-4 w-4 text-theme-muted"}),"Payoff Timeline"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-theme-muted",children:"Minimum payments"}),e.jsx("span",{className:"text-theme-secondary font-medium",children:k(s.months)})]}),e.jsx("div",{className:"h-3 bg-theme-tertiary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gray-400 dark:bg-gray-500 rounded-full transition-all duration-500",style:{width:`${d}%`}})})]}),n&&a&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-accent-600 font-medium",children:"With extra payments"}),e.jsx("span",{className:"text-accent-600 font-medium",children:k(a.months)})]}),e.jsx("div",{className:"h-3 bg-theme-tertiary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-accent-600 rounded-full transition-all duration-500",style:{width:`${N}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-theme-muted pt-2 border-t border-theme",children:[e.jsx("span",{children:"Today"}),e.jsx("span",{children:s.payoffDate.toLocaleDateString("en-US",{month:"short",year:"numeric"})})]})]})}export{de as default};
//# sourceMappingURL=payoff-calculator.Bpr5D30u.js.map
