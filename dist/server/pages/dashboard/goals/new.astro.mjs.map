{"version":3,"file":"new.astro.mjs","sources":["../../../../../src/components/forms/new-goal-form.tsx","../../../../../src/pages/dashboard/goals/new.astro"],"sourcesContent":["import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowLeft } from \"lucide-react\";\n\nexport default function NewGoalForm() {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    name: \"\",\n    targetAmount: \"\",\n    currentAmount: \"\",\n    deadline: \"\",\n    notes: \"\",\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setIsSubmitting(true);\n\n    try {\n      const res = await fetch(\"/api/goals\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: formData.name,\n          targetAmount: parseFloat(formData.targetAmount),\n          currentAmount: formData.currentAmount ? parseFloat(formData.currentAmount) : 0,\n          deadline: formData.deadline || null,\n          notes: formData.notes || null,\n        }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json();\n        throw new Error(data.error || \"Failed to create goal\");\n      }\n\n      window.location.href = \"/dashboard/goals\";\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Something went wrong\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const inputClasses =\n    \"w-full px-4 py-2 bg-theme-secondary border border-theme rounded-xl text-theme-primary placeholder-theme-muted focus:outline-none focus:ring-2 focus:ring-accent-500/20 focus:border-accent-500\";\n\n  return (\n    <div className=\"animate-fade-in space-y-6 lg:space-y-8\">\n      <div className=\"flex items-center gap-4\">\n        <a href=\"/dashboard/goals\">\n          <Button variant=\"ghost\" size=\"sm\" leftIcon={<ArrowLeft className=\"h-4 w-4\" />}>\n            Back\n          </Button>\n        </a>\n        <div>\n          <h1 className=\"text-2xl font-bold text-theme-primary\">Add New Goal</h1>\n          <p className=\"text-theme-secondary mt-1\">Create a new savings goal to track your progress</p>\n        </div>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Goal Details</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {error && (\n              <div className=\"p-3 rounded-xl bg-danger-50 dark:bg-danger-600/10 border border-danger-200 dark:border-danger-600/30 text-danger-700 dark:text-danger-400 text-sm\">\n                {error}\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-2\">\n                <label htmlFor=\"name\" className=\"block text-sm font-medium text-theme-secondary\">\n                  Name *\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"name\"\n                  name=\"name\"\n                  required\n                  autoFocus\n                  value={formData.name}\n                  onChange={handleChange}\n                  placeholder=\"e.g., Emergency Fund, Vacation\"\n                  className={inputClasses}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <label htmlFor=\"targetAmount\" className=\"block text-sm font-medium text-theme-secondary\">\n                  Target Amount *\n                </label>\n                <div className=\"relative\">\n                  <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-theme-muted\">$</span>\n                  <input\n                    type=\"number\"\n                    id=\"targetAmount\"\n                    name=\"targetAmount\"\n                    required\n                    min=\"0\"\n                    step=\"0.01\"\n                    inputMode=\"decimal\"\n                    value={formData.targetAmount}\n                    onChange={handleChange}\n                    placeholder=\"0.00\"\n                    className={`${inputClasses} pl-8`}\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <label htmlFor=\"currentAmount\" className=\"block text-sm font-medium text-theme-secondary\">\n                  Current Amount\n                </label>\n                <div className=\"relative\">\n                  <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-theme-muted\">$</span>\n                  <input\n                    type=\"number\"\n                    id=\"currentAmount\"\n                    name=\"currentAmount\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    inputMode=\"decimal\"\n                    value={formData.currentAmount}\n                    onChange={handleChange}\n                    placeholder=\"0.00\"\n                    className={`${inputClasses} pl-8`}\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <label htmlFor=\"deadline\" className=\"block text-sm font-medium text-theme-secondary\">\n                  Deadline\n                </label>\n                <input\n                  type=\"date\"\n                  id=\"deadline\"\n                  name=\"deadline\"\n                  value={formData.deadline}\n                  onChange={handleChange}\n                  className={inputClasses}\n                />\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label htmlFor=\"notes\" className=\"block text-sm font-medium text-theme-secondary\">\n                Notes\n              </label>\n              <textarea\n                id=\"notes\"\n                name=\"notes\"\n                rows={3}\n                value={formData.notes}\n                onChange={handleChange}\n                placeholder=\"Any additional notes about this goal...\"\n                className={`${inputClasses} resize-none`}\n              />\n            </div>\n\n            <div className=\"flex gap-4 pt-4\">\n              <Button type=\"submit\" disabled={isSubmitting}>\n                {isSubmitting ? \"Creating...\" : \"Create Goal\"}\n              </Button>\n              <a href=\"/dashboard/goals\">\n                <Button type=\"button\" variant=\"secondary\">\n                  Cancel\n                </Button>\n              </a>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","---\nimport DashboardLayout from '../../../layouts/DashboardLayout.astro';\nimport NewGoalForm from '../../../components/forms/new-goal-form';\nimport { getSession } from '../../../lib/get-session-astro';\n\nconst session = await getSession(Astro.request);\nif (!session?.user?.id) {\n  return Astro.redirect('/login');\n}\n---\n<DashboardLayout title=\"Add Goal\" currentPath=\"/dashboard/goals\" user={session.user} showExploreSidebar={false}>\n  <NewGoalForm client:load />\n</DashboardLayout>\n"],"names":["$$createAstro","$$createComponent","Astro","$$render","$$renderComponent","DashboardLayout","$$result"],"mappings":";;;;;;;;;;;AAKA,SAAwB,WAAA,GAAc;AACpC,EAAA,MAAM,CAAC,YAAA,EAAc,eAAe,CAAA,GAAI,SAAS,KAAK,CAAA;AACtD,EAAA,MAAM,CAAC,KAAA,EAAO,QAAQ,CAAA,GAAI,SAAS,EAAE,CAAA;AAErC,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,QAAA,CAAS;AAAA,IACvC,IAAA,EAAM,EAAA;AAAA,IACN,YAAA,EAAc,EAAA;AAAA,IACd,aAAA,EAAe,EAAA;AAAA,IACf,QAAA,EAAU,EAAA;AAAA,IACV,KAAA,EAAO;AAAA,GACR,CAAA;AAED,EAAA,MAAM,YAAA,GAAe,OAAO,CAAA,KAAuB;AACjD,IAAA,CAAA,CAAE,cAAA,EAAe;AACjB,IAAA,QAAA,CAAS,EAAE,CAAA;AACX,IAAA,eAAA,CAAgB,IAAI,CAAA;AAEpB,IAAA,IAAI;AACF,MAAA,MAAM,GAAA,GAAM,MAAM,KAAA,CAAM,YAAA,EAAc;AAAA,QACpC,MAAA,EAAQ,MAAA;AAAA,QACR,OAAA,EAAS,EAAE,cAAA,EAAgB,kBAAA,EAAmB;AAAA,QAC9C,IAAA,EAAM,KAAK,SAAA,CAAU;AAAA,UACnB,MAAM,QAAA,CAAS,IAAA;AAAA,UACf,YAAA,EAAc,UAAA,CAAW,QAAA,CAAS,YAAY,CAAA;AAAA,UAC9C,eAAe,QAAA,CAAS,aAAA,GAAgB,UAAA,CAAW,QAAA,CAAS,aAAa,CAAA,GAAI,CAAA;AAAA,UAC7E,QAAA,EAAU,SAAS,QAAA,IAAY,IAAA;AAAA,UAC/B,KAAA,EAAO,SAAS,KAAA,IAAS;AAAA,SAC1B;AAAA,OACF,CAAA;AAED,MAAA,IAAI,CAAC,IAAI,EAAA,EAAI;AACX,QAAA,MAAM,IAAA,GAAO,MAAM,GAAA,CAAI,IAAA,EAAK;AAC5B,QAAA,MAAM,IAAI,KAAA,CAAM,IAAA,CAAK,KAAA,IAAS,uBAAuB,CAAA;AAAA,MACvD;AAEA,MAAA,MAAA,CAAO,SAAS,IAAA,GAAO,kBAAA;AAAA,IACzB,SAAS,GAAA,EAAK;AACZ,MAAA,QAAA,CAAS,GAAA,YAAe,KAAA,GAAQ,GAAA,CAAI,OAAA,GAAU,sBAAsB,CAAA;AAAA,IACtE,CAAA,SAAE;AACA,MAAA,eAAA,CAAgB,KAAK,CAAA;AAAA,IACvB;AAAA,EACF,CAAA;AAEA,EAAA,MAAM,YAAA,GAAe,CACnB,CAAA,KACG;AACH,IAAA,MAAM,EAAE,IAAA,EAAM,KAAA,EAAM,GAAI,CAAA,CAAE,MAAA;AAC1B,IAAA,WAAA,CAAY,CAAC,IAAA,MAAU;AAAA,MACrB,GAAG,IAAA;AAAA,MACH,CAAC,IAAI,GAAG;AAAA,KACV,CAAE,CAAA;AAAA,EACJ,CAAA;AAEA,EAAA,MAAM,YAAA,GACJ,gMAAA;AAEF,EAAA,uBACE,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,wCAAA,EACb,QAAA,EAAA;AAAA,oBAAA,IAAA,CAAC,KAAA,EAAA,EAAI,WAAU,yBAAA,EACb,QAAA,EAAA;AAAA,sBAAA,GAAA,CAAC,OAAE,IAAA,EAAK,kBAAA,EACN,QAAA,kBAAA,GAAA,CAAC,MAAA,EAAA,EAAO,SAAQ,OAAA,EAAQ,IAAA,EAAK,IAAA,EAAK,QAAA,sBAAW,SAAA,EAAA,EAAU,SAAA,EAAU,SAAA,EAAU,CAAA,EAAI,kBAE/E,CAAA,EACF,CAAA;AAAA,2BACC,KAAA,EAAA,EACC,QAAA,EAAA;AAAA,wBAAA,GAAA,CAAC,IAAA,EAAA,EAAG,SAAA,EAAU,uCAAA,EAAwC,QAAA,EAAA,cAAA,EAAY,CAAA;AAAA,wBAClE,GAAA,CAAC,GAAA,EAAA,EAAE,SAAA,EAAU,2BAAA,EAA4B,QAAA,EAAA,kDAAA,EAAgD;AAAA,OAAA,EAC3F;AAAA,KAAA,EACF,CAAA;AAAA,yBAEC,IAAA,EAAA,EACC,QAAA,EAAA;AAAA,sBAAA,GAAA,CAAC,UAAA,EAAA,EACC,QAAA,kBAAA,GAAA,CAAC,SAAA,EAAA,EAAU,QAAA,EAAA,cAAA,EAAY,CAAA,EACzB,CAAA;AAAA,0BACC,WAAA,EAAA,EACC,QAAA,kBAAA,IAAA,CAAC,UAAK,QAAA,EAAU,YAAA,EAAc,WAAU,WAAA,EACrC,QAAA,EAAA;AAAA,QAAA,KAAA,oBACC,GAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,mJAAA,EACZ,QAAA,EAAA,KAAA,EACH,CAAA;AAAA,wBAGF,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,uCAAA,EACb,QAAA,EAAA;AAAA,0BAAA,IAAA,CAAC,KAAA,EAAA,EAAI,WAAU,WAAA,EACb,QAAA,EAAA;AAAA,4BAAA,GAAA,CAAC,OAAA,EAAA,EAAM,OAAA,EAAQ,MAAA,EAAO,SAAA,EAAU,kDAAiD,QAAA,EAAA,QAAA,EAEjF,CAAA;AAAA,4BACA,GAAA;AAAA,cAAC,OAAA;AAAA,cAAA;AAAA,gBACC,IAAA,EAAK,MAAA;AAAA,gBACL,EAAA,EAAG,MAAA;AAAA,gBACH,IAAA,EAAK,MAAA;AAAA,gBACL,QAAA,EAAQ,IAAA;AAAA,gBACR,SAAA,EAAS,IAAA;AAAA,gBACT,OAAO,QAAA,CAAS,IAAA;AAAA,gBAChB,QAAA,EAAU,YAAA;AAAA,gBACV,WAAA,EAAY,gCAAA;AAAA,gBACZ,SAAA,EAAW;AAAA;AAAA;AACb,WAAA,EACF,CAAA;AAAA,0BAEA,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,WAAA,EACb,QAAA,EAAA;AAAA,4BAAA,GAAA,CAAC,OAAA,EAAA,EAAM,OAAA,EAAQ,cAAA,EAAe,SAAA,EAAU,kDAAiD,QAAA,EAAA,iBAAA,EAEzF,CAAA;AAAA,4BACA,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,UAAA,EACb,QAAA,EAAA;AAAA,8BAAA,GAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,2DAAA,EAA4D,QAAA,EAAA,GAAA,EAAC,CAAA;AAAA,8BAC7E,GAAA;AAAA,gBAAC,OAAA;AAAA,gBAAA;AAAA,kBACC,IAAA,EAAK,QAAA;AAAA,kBACL,EAAA,EAAG,cAAA;AAAA,kBACH,IAAA,EAAK,cAAA;AAAA,kBACL,QAAA,EAAQ,IAAA;AAAA,kBACR,GAAA,EAAI,GAAA;AAAA,kBACJ,IAAA,EAAK,MAAA;AAAA,kBACL,SAAA,EAAU,SAAA;AAAA,kBACV,OAAO,QAAA,CAAS,YAAA;AAAA,kBAChB,QAAA,EAAU,YAAA;AAAA,kBACV,WAAA,EAAY,MAAA;AAAA,kBACZ,SAAA,EAAW,GAAG,YAAY,CAAA,KAAA;AAAA;AAAA;AAC5B,aAAA,EACF;AAAA,WAAA,EACF,CAAA;AAAA,0BAEA,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,WAAA,EACb,QAAA,EAAA;AAAA,4BAAA,GAAA,CAAC,OAAA,EAAA,EAAM,OAAA,EAAQ,eAAA,EAAgB,SAAA,EAAU,kDAAiD,QAAA,EAAA,gBAAA,EAE1F,CAAA;AAAA,4BACA,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,UAAA,EACb,QAAA,EAAA;AAAA,8BAAA,GAAA,CAAC,MAAA,EAAA,EAAK,SAAA,EAAU,2DAAA,EAA4D,QAAA,EAAA,GAAA,EAAC,CAAA;AAAA,8BAC7E,GAAA;AAAA,gBAAC,OAAA;AAAA,gBAAA;AAAA,kBACC,IAAA,EAAK,QAAA;AAAA,kBACL,EAAA,EAAG,eAAA;AAAA,kBACH,IAAA,EAAK,eAAA;AAAA,kBACL,GAAA,EAAI,GAAA;AAAA,kBACJ,IAAA,EAAK,MAAA;AAAA,kBACL,SAAA,EAAU,SAAA;AAAA,kBACV,OAAO,QAAA,CAAS,aAAA;AAAA,kBAChB,QAAA,EAAU,YAAA;AAAA,kBACV,WAAA,EAAY,MAAA;AAAA,kBACZ,SAAA,EAAW,GAAG,YAAY,CAAA,KAAA;AAAA;AAAA;AAC5B,aAAA,EACF;AAAA,WAAA,EACF,CAAA;AAAA,0BAEA,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,WAAA,EACb,QAAA,EAAA;AAAA,4BAAA,GAAA,CAAC,OAAA,EAAA,EAAM,OAAA,EAAQ,UAAA,EAAW,SAAA,EAAU,kDAAiD,QAAA,EAAA,UAAA,EAErF,CAAA;AAAA,4BACA,GAAA;AAAA,cAAC,OAAA;AAAA,cAAA;AAAA,gBACC,IAAA,EAAK,MAAA;AAAA,gBACL,EAAA,EAAG,UAAA;AAAA,gBACH,IAAA,EAAK,UAAA;AAAA,gBACL,OAAO,QAAA,CAAS,QAAA;AAAA,gBAChB,QAAA,EAAU,YAAA;AAAA,gBACV,SAAA,EAAW;AAAA;AAAA;AACb,WAAA,EACF;AAAA,SAAA,EACF,CAAA;AAAA,wBAEA,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,WAAA,EACb,QAAA,EAAA;AAAA,0BAAA,GAAA,CAAC,OAAA,EAAA,EAAM,OAAA,EAAQ,OAAA,EAAQ,SAAA,EAAU,kDAAiD,QAAA,EAAA,OAAA,EAElF,CAAA;AAAA,0BACA,GAAA;AAAA,YAAC,UAAA;AAAA,YAAA;AAAA,cACC,EAAA,EAAG,OAAA;AAAA,cACH,IAAA,EAAK,OAAA;AAAA,cACL,IAAA,EAAM,CAAA;AAAA,cACN,OAAO,QAAA,CAAS,KAAA;AAAA,cAChB,QAAA,EAAU,YAAA;AAAA,cACV,WAAA,EAAY,yCAAA;AAAA,cACZ,SAAA,EAAW,GAAG,YAAY,CAAA,YAAA;AAAA;AAAA;AAC5B,SAAA,EACF,CAAA;AAAA,wBAEA,IAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAU,iBAAA,EACb,QAAA,EAAA;AAAA,0BAAA,GAAA,CAAC,UAAO,IAAA,EAAK,QAAA,EAAS,UAAU,YAAA,EAC7B,QAAA,EAAA,YAAA,GAAe,gBAAgB,aAAA,EAClC,CAAA;AAAA,0BACA,GAAA,CAAC,GAAA,EAAA,EAAE,IAAA,EAAK,kBAAA,EACN,QAAA,kBAAA,GAAA,CAAC,MAAA,EAAA,EAAO,IAAA,EAAK,QAAA,EAAS,OAAA,EAAQ,WAAA,EAAY,QAAA,EAAA,QAAA,EAE1C,CAAA,EACF;AAAA,SAAA,EACF;AAAA,OAAA,EACF,CAAA,EACF;AAAA,KAAA,EACF;AAAA,GAAA,EACF,CAAA;AAEJ;;ACjMA,MAAA,UAAAA,WAAA,EAAA;AAAA,MAAA,KAAA,GAAAC,eAAA,CAAA,OAAA,QAAA,EAAA,SAAA,OAAA,KAAA;AAAA,EAAA,MAAAC,MAAAA,GAAA,QAAA,CAAA,WAAA,CAAA,OAAA,EAAA,SAAA,OAAA,CAAA;AAAA,EAAAA,OAAA,IAAA,GAAA,KAAA;AAKA,EAAA,MAAM,OAAA,GAAU,MAAM,UAAA,CAAWA,MAAAA,CAAM,OAAO,CAAA;AAC9C,EAAA,IAAI,CAAC,OAAA,EAAS,IAAA,EAAM,EAAA,EAAI;AACtB,IAAA,OAAOA,MAAAA,CAAM,SAAS,QAAQ,CAAA;AAChC,EAAA;AARA,EAAA,OAAAC,iBAAAC,eAAA,CAAA,QAAA,EAAA,iBAAA,EAAAC,iBAAA,EAAA,EAUiB,OAAA,EAAO,UAAA,EAAU,aAAA,EAAa,kBAAA,EAAkB,QAAM,OAAA,CAAA,IAAA,EAAc,sBAVrF,KAAA,EAAA,EAAA,EAAA,SAAA,EAAA,OAAAC,SAAAA,KAAAH,cAAA,CAAA,CAAA,EAAAC,gBAAAE,SAAAA,EAAA,aAAA,EAAA,WAAA,EAAA,EAWe,eAAA,IAAA,EAXf,4BAAA,EAAA,MAAA,EAAA,uBAAA,EAAA,4EAAA,yBAAA,EAAA,SAAA,EAWG,CAAA,CAAA,CAAA,CAAA,EAXH,CAAA,CAAA,CAAA;AAAA,CAAA,EAAA,6EAAA,MAAA,CAAA;;;;;;;;;;;;;;;;"}