{"version":3,"file":"payments.astro.mjs","sources":["../../../../../../src/pages/api/debts/[id]/payments.ts"],"sourcesContent":["import type { APIRoute } from \"astro\";\nimport { getSession } from \"../../../../lib/get-session-astro\";\nimport { recordPayment } from \"../../../../lib/services/debts\";\nimport { apiResponse, apiError } from \"../../../../lib/api-utils\";\n\nexport const POST: APIRoute = async ({ request, params }) => {\n  const session = await getSession(request);\n  if (!session?.user?.id) {\n    return apiError(\"Unauthorized\", 401);\n  }\n\n  const { id } = params;\n  if (!id) {\n    return apiError(\"Debt ID required\", 400);\n  }\n\n  try {\n    const body = await request.json();\n    const payment = await recordPayment(session.user.id, id, body);\n    return apiResponse(payment, 201);\n  } catch (error) {\n    return apiError(error instanceof Error ? error.message : \"Failed to record payment\", 400);\n  }\n};\n"],"names":[],"mappings":";;;;;AAKO,MAAM,IAAA,GAAiB,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AAC3D,EAAA,MAAM,OAAA,GAAU,MAAM,UAAA,CAAW,OAAO,CAAA;AACxC,EAAA,IAAI,CAAC,OAAA,EAAS,IAAA,EAAM,EAAA,EAAI;AACtB,IAAA,OAAO,QAAA,CAAS,gBAAgB,GAAG,CAAA;AAAA,EACrC;AAEA,EAAA,MAAM,EAAE,IAAG,GAAI,MAAA;AACf,EAAA,IAAI,CAAC,EAAA,EAAI;AACP,IAAA,OAAO,QAAA,CAAS,oBAAoB,GAAG,CAAA;AAAA,EACzC;AAEA,EAAA,IAAI;AACF,IAAA,MAAM,IAAA,GAAO,MAAM,OAAA,CAAQ,IAAA,EAAK;AAChC,IAAA,MAAM,UAAU,MAAM,aAAA,CAAc,QAAQ,IAAA,CAAK,EAAA,EAAI,IAAI,IAAI,CAAA;AAC7D,IAAA,OAAO,WAAA,CAAY,SAAS,GAAG,CAAA;AAAA,EACjC,SAAS,KAAA,EAAO;AACd,IAAA,OAAO,SAAS,KAAA,YAAiB,KAAA,GAAQ,KAAA,CAAM,OAAA,GAAU,4BAA4B,GAAG,CAAA;AAAA,EAC1F;AACF,CAAA;;;;;;;;;;;"}