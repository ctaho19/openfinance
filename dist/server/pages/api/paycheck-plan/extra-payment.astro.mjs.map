{"version":3,"file":"extra-payment.astro.mjs","sources":["../../../../../src/pages/api/paycheck-plan/extra-payment.ts"],"sourcesContent":["import type { APIRoute } from \"astro\";\nimport { getSession } from \"../../../lib/get-session-astro\";\nimport { recordExtraDebtPayment } from \"../../../lib/services/dollar-allocation-plan\";\nimport { apiResponse, apiError } from \"../../../lib/api-utils\";\n\nexport const POST: APIRoute = async ({ request }) => {\n  const session = await getSession(request);\n  if (!session?.user?.id) {\n    return apiError(\"Unauthorized\", 401);\n  }\n\n  try {\n    const body = await request.json();\n    \n    if (!body.debtId || !body.amount) {\n      return apiError(\"debtId and amount are required\", 400);\n    }\n\n    const result = await recordExtraDebtPayment(\n      session.user.id,\n      body.debtId,\n      body.amount\n    );\n\n    return apiResponse(result);\n  } catch (error) {\n    console.error(\"Error recording extra payment:\", error);\n    return apiError(\n      error instanceof Error ? error.message : \"Failed to record extra payment\",\n      400\n    );\n  }\n};\n"],"names":[],"mappings":";;;;;AAKO,MAAM,IAAA,GAAiB,OAAO,EAAE,OAAA,EAAQ,KAAM;AACnD,EAAA,MAAM,OAAA,GAAU,MAAM,UAAA,CAAW,OAAO,CAAA;AACxC,EAAA,IAAI,CAAC,OAAA,EAAS,IAAA,EAAM,EAAA,EAAI;AACtB,IAAA,OAAO,QAAA,CAAS,gBAAgB,GAAG,CAAA;AAAA,EACrC;AAEA,EAAA,IAAI;AACF,IAAA,MAAM,IAAA,GAAO,MAAM,OAAA,CAAQ,IAAA,EAAK;AAEhC,IAAA,IAAI,CAAC,IAAA,CAAK,MAAA,IAAU,CAAC,KAAK,MAAA,EAAQ;AAChC,MAAA,OAAO,QAAA,CAAS,kCAAkC,GAAG,CAAA;AAAA,IACvD;AAEA,IAAA,MAAM,SAAS,MAAM,sBAAA;AAAA,MACnB,QAAQ,IAAA,CAAK,EAAA;AAAA,MACb,IAAA,CAAK,MAAA;AAAA,MACL,IAAA,CAAK;AAAA,KACP;AAEA,IAAA,OAAO,YAAY,MAAM,CAAA;AAAA,EAC3B,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,kCAAkC,KAAK,CAAA;AACrD,IAAA,OAAO,QAAA;AAAA,MACL,KAAA,YAAiB,KAAA,GAAQ,KAAA,CAAM,OAAA,GAAU,gCAAA;AAAA,MACzC;AAAA,KACF;AAAA,EACF;AACF,CAAA;;;;;;;;;;;"}